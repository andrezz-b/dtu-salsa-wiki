---
import { FaStar, FaStarHalfAlt, FaRegStar } from "react-icons/fa";

interface Props {
  rating: number;
  max?: number;
  size?: number;
  class?: string;
}

const { rating, max = 5, size = 16, class: className } = Astro.props;

const stars = [];
for (let i = 1; i <= max; i++) {
  if (rating >= i) {
    stars.push("full");
  } else if (rating >= i - 0.5) {
    stars.push("half");
  } else {
    stars.push("empty");
  }
}
---

<div class:list={["flex items-center gap-0.5", className]} title={`Rating: ${rating}/${max}`}>
  {
    stars.map((type) => (
      <span class="text-yellow-400" style={{ fontSize: `${size}px` }}>
        {type === "full" ? (
          <FaStar />
        ) : type === "half" ? (
          <FaStarHalfAlt />
        ) : (
          <FaRegStar className="text-gray-300 dark:text-gray-600" />
        )}
      </span>
    ))
  }
</div>
